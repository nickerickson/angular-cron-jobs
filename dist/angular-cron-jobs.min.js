/**
 * UI Component For Creating Cron Job Syntax To Send To Server
 * @version v1.0.1 - 2015-03-30 * @link https://github.com/jacobscarter/angular-cron-jobs
 * @author Jacob Carter <jacob@ieksolutions.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("templates-angularcronjobs",["cronselection.html"]),angular.module("cronselection.html",[]).run(["$templateCache",function(a){a.put("cronselection.html",'<div class="cron-wrap">\n	<span>Every: </span>\n	<select class="cron-select" ng-change="baseChange()" ng-model="myFrequency.base" ng-options="item.value as item.text for item in frequency">\n		\n	</select>\n	<div ng-show="myFrequency.base === 2" class="select-options">\n		<span> at\n		</span>\n		<select class="cron-select" ng-model="myFrequency.pastTheHour" ng-options="item.value as item.value for item in pastTheHour">\n		</select>\n		<span> past the hour\n		</span>\n	</div>\n	<div ng-show="myFrequency.base === 3" class="select-options">\n		<span>at </span>\n		<select class="cron-select" ng-model="myFrequency.hourValue" ng-options="item.value as item.value for item in hourValue">\n		</select>\n		<span> : </span>\n		<select class="cron-select" ng-model="myFrequency.minuteValue" ng-options="item.value as item.value for item in minuteValue">\n		</select>\n	</div>\n	<div ng-show="myFrequency.base === 4" class="select-options">\n		<span>on\n		</span>\n		<select class="cron-select" ng-model="myFrequency.dayValue" ng-options="item.value as item.text for item in dayValue">\n		</select>\n		<span>at </span>\n		<select class="cron-select" ng-model="myFrequency.weekHourValue" ng-options="item.value as item.value for item in hourValue">\n		</select>\n		<span> : </span>\n		<select class="cron-select" ng-model="myFrequency.weekMinuteValue" ng-options="item.value as item.value for item in minuteValue">\n		</select>\n	</div>\n	<div ng-show="myFrequency.base === 5" class="select-options">\n		<span>on the </span>\n		<select class="cron-select" ng-model="myFrequency.dayOfMonthValue" ng-options="item.value as item.text for item in dayOfMonthValue">\n		</select>\n		<span>at </span>\n		<select class="cron-select" ng-model="myFrequency.weekHourValue" ng-options="item.value as item.value for item in hourValue">\n		</select>\n		<span> : </span>\n		<select class="cron-select" ng-model="myFrequency.weekMinuteValue" ng-options="item.value as item.value for item in minuteValue">\n		</select>\n	</div>\n	<div ng-show="myFrequency.base === 6" class="select-options">\n		<span>on the </span>\n		<select class="cron-select" ng-model="myFrequency.dayOfMonthValue" ng-options="item.value as item.text for item in dayOfMonthValue">\n		</select>\n		<span>of </span>\n		<select class="cron-select" ng-model="myFrequency.monthValue" ng-options="item.value as item.text for item in monthValue">\n		</select>\n		<span>at </span>\n		<select class="cron-select" ng-model="myFrequency.weekHourValue" ng-options="item.value as item.value for item in hourValue">\n		</select>\n		<span> : </span>\n		<select class="cron-select" ng-model="myFrequency.weekMinuteValue" ng-options="item.value as item.value for item in minuteValue">\n		</select>\n	</div>\n</div>')}]),angular.module("angular-cron-jobs",["templates-angularcronjobs"]),angular.module("angular-cron-jobs").directive("cronSelection",["cronService",function(a){return{restrict:"EA",replace:!0,transclude:!0,scope:{config:"=",output:"="},templateUrl:function(a,b){return b.template||"cronselection.html"},link:function(b,c,d){if(b.showCustom=!1,b.frequency=[{value:1,text:"Minute"},{value:2,text:"Hour"},{value:3,text:"Day"},{value:4,text:"Week"},{value:5,text:"Month"},{value:6,text:"Year"}],"object"==typeof b.config&&!b.config.length){var e=Object.keys(b.config.options);for(var f in e){console.log("optionsKeyArray[i]: ",e[f]);var g=e[f].split("allow"),h=g[1],i=e[f];if(console.log("currentKey: ",h),!b.config.options[i]){console.log("found false config option: ",b.config.options[i]);for(var j in b.frequency)console.log("entered frequency loop"),console.log("$scope.frequency[i]",b.frequency[j].text),console.log("currentKey: ",h),b.frequency[j].text===h&&b.frequency.splice(j,1)}}}b.pastTheHour=[{value:0},{value:5},{value:10},{value:15},{value:20},{value:25},{value:30},{value:35},{value:40},{value:45},{value:50},{value:55}],b.minuteValue=[{value:0},{value:5},{value:10},{value:15},{value:20},{value:25},{value:30},{value:35},{value:40},{value:45},{value:50},{value:55}],b.hourValue=[{value:0},{value:1},{value:2},{value:3},{value:4},{value:5},{value:6},{value:7},{value:8},{value:9},{value:10},{value:11},{value:12},{value:13},{value:14},{value:15},{value:16},{value:17},{value:18},{value:19},{value:20},{value:21},{value:22},{value:23}],b.dayValue=[{value:1,text:"Sunday"},{value:2,text:"Monday"},{value:3,text:"Tuesday"},{value:4,text:"Wednesday"},{value:5,text:"Thursday"},{value:6,text:"Friday"},{value:7,text:"Saturday"}],b.dayOfMonthValue=[{value:1,text:"1st"},{value:2,text:"2nd"},{value:3,text:"3rd"},{value:4,text:"4th"},{value:5,text:"5th"},{value:6,text:"6th"},{value:7,text:"7th"},{value:8,text:"8th"},{value:9,text:"9th"},{value:10,text:"10th"},{value:11,text:"11th"},{value:12,text:"12th"},{value:13,text:"13th"},{value:14,text:"14th"},{value:15,text:"15th"},{value:16,text:"16th"},{value:17,text:"17th"},{value:18,text:"18th"},{value:19,text:"19th"},{value:20,text:"20th"},{value:21,text:"21st"},{value:22,text:"22nd"},{value:23,text:"23rd"},{value:24,text:"24th"},{value:25,text:"25th"},{value:26,text:"26th"},{value:27,text:"27th"},{value:28,text:"28th"},{value:29,text:"29th"},{value:30,text:"30th"},{value:31,text:"31st"}],b.monthValue=[{value:1,text:"January"},{value:2,text:"February"},{value:3,text:"March"},{value:4,text:"April"},{value:5,text:"May"},{value:6,text:"June"},{value:7,text:"July"},{value:8,text:"August"},{value:9,text:"September"},{value:10,text:"October"},{value:11,text:"November"},{value:12,text:"December"}],b.output&&(b.myFrequency=a.setFrequency(b.output)),b.baseChange=function(){console.log("base change");var a=b.myFrequency.base;b.myFrequency={base:a}},b.$watch("myFrequency",function(c){c&&(b.output=a.setCron(c),console.log("output: ",b.output))},!0)}}}]),angular.module("angular-cron-jobs").factory("cronService",function(){var a={};return a.setCron=function(a){var b;switch(a.base){case 1:b="* * * * *";break;case 2:a.pastTheHour=a.pastTheHour||0,b=a.pastTheHour+" * * * *";break;case 3:a.minuteValue=a.minuteValue||0,a.hourValue=a.hourValue||0,b=a.minuteValue+" "+a.hourValue+" * * *";break;case 4:a.weekMinuteValue=a.weekMinuteValue||0,a.weekHourValue=a.weekHourValue||0,a.dayValue=a.dayValue||1,b=a.weekMinuteValue+" "+a.weekHourValue+" * * "+(a.dayValue-1);break;case 5:a.weekMinuteValue=a.weekMinuteValue||0,a.weekHourValue=a.weekHourValue||0,a.dayOfMonthValue=a.dayOfMonthValue||1,b=a.weekMinuteValue+" "+a.weekHourValue+" "+a.dayOfMonthValue+" * *";break;case 6:a.weekMinuteValue=a.weekMinuteValue||0,a.weekHourValue=a.weekHourValue||0,a.dayOfMonthValue=a.dayOfMonthValue||1,a.monthValue=a.monthValue||1,b=a.weekMinuteValue+" "+a.weekHourValue+" "+a.dayOfMonthValue+" "+a.monthValue+" *"}return b},a.setFrequency=function(a){var b=a.split(" ");console.log(b);var c={};return"*"===b[0]?c.base=1:"*"===b[1]?(c.base=2,c.pastTheHour=parseInt(b[0])):"*"===b[2]&&"*"===b[4]?(c.base=3,c.minuteValue=parseInt(b[0]),c.hourValue=parseInt(b[1])):"*"===b[2]&&"*"!==b[4]?(c.base=4,c.weekMinuteValue=parseInt(b[0]),c.weekHourValue=parseInt(b[1]),c.dayValue=parseInt(b[4])):"*"===b[3]?(c.base=5,c.weekMinuteValue=parseInt(b[0]),c.weekHourValue=parseInt(b[1]),c.dayOfMonthValue=parseInt(b[2])):(c.base=6,c.weekMinuteValue=parseInt(b[0]),c.weekHourValue=parseInt(b[1]),c.dayOfMonthValue=parseInt(b[2]),c.monthValue=parseInt(b[3])),console.log(c),c},a});